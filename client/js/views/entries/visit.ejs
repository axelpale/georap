
<div id="<%= entry.getId() %>" class="panel panel-default tresdb-content-visit">

  <div class="panel-heading">
    <% if (entry.getUserName() === account.getName()) { %>
      <div class="btn-group pull-right">
        <button id="<%= entry.getId() %>-edit" type="button" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-pencil"></span> Edit</a>
      </div>
    <% } %>
    <%= entry.getUserName() %> visited <em><%= entry.getLocation().getName() %></em> in <span id="<%= entry.getId() %>-year"><%= entry.getYear() %></span>, added <%= timestamp(entry.getTime()) %>
  </div>

  <% if (entry.getUserName() === account.getName()) { %>
    <div id="<%= entry.getId() %>-form-container" class="panel-body hidden">
      <form id="<%= entry.getId() %>-form">
        <div class="form-group">
          <label for="<%= entry.getId() %>-input">Year:</label>
          <select id="<%= entry.getId() %>-input" class="form-control">
            <% var nowYear = (new Date()).getFullYear(); %>
            <option selected="selected"><%= nowYear %></option>
            <% for (var y = nowYear - 1; y >= 1960; y -= 1) { %>
              <option><%= y %></option>
            <% } %>
          </select>
        </div>
        <div class="pull-right">
          <button id="<%= entry.getId() %>-cancel" type="button" class="btn btn-default">Cancel</button>
          <button type="submit" class="btn btn-primary">Save</button>
        </div>
        <button id="<%= entry.getId() %>-delete-ensure" type="button" class="btn btn-danger">Delete</button>

        <div id="<%= entry.getId() %>-delete-final" class="hidden">
          Are you sure?
          <button id="<%= entry.getId() %>-delete" type="button" class="btn btn-danger">Yes, delete!</button>
        </div>
      </form>
    </div>

    <div id="<%= entry.getId() %>-progress" class="progress hidden">
      <div class="progress-bar progress-bar-striped active" role="progressbar" style="width: 100%">
        <span class="sr-only">Waiting for server</span>
      </div>
    </div>

    <div id="<%= entry.getId() %>-error" class="hidden panel-body">
      <div class="alert alert-danger" role="alert">Save failed. Might be a connection issue.</div>
    </div>

    <div id="<%= entry.getId() %>-delete-error" class="hidden panel-body">
      <div class="alert alert-danger" role="alert">Deletion failed. Might be a connection issue.</div>
    </div>
  <% } %>

</div>
